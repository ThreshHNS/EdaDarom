{"ast":null,"code":"var _jsxFileName = \"/home/thresh/projects/EdaDarom/src/panels/Welcome.js\";\nimport React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { YMaps, Map, Placemark, GeolocationControl } from \"react-yandex-maps\";\nimport { View, Panel, ModalRoot, ModalPage, ModalCard, PanelHeader, Button, Group, List, Cell, Div, Gallery, InfoRow, Avatar, Header, Text, ModalPageHeader, PanelHeaderButton, Spinner, ANDROID, IOS, usePlatform } from \"@vkontakte/vkui\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport Icon24Cancel from \"@vkontakte/icons/dist/24/cancel\";\nimport Icon24Dismiss from \"@vkontakte/icons/dist/24/dismiss\";\nimport pizza from \"../img/pizza.png\";\nimport person from \"../img/person.png\";\nimport home from \"../img/home.png\";\n\nconst Welcome = ({\n  id,\n  activePanel,\n  setActivePanel,\n  popout,\n  go,\n  fetchedUser\n}) => {\n  const [galleryPage, setGalleryPage] = useState(0);\n  const [geoLocation, setGeoLocation] = useState({\n    lat: null,\n    long: null,\n    firstEntry: false,\n    currentGeo: {},\n    coordinates: null\n  });\n  const [geoModal, setGeoModal] = useState(null);\n  const [mapVisible, setMapVisible] = useState(false);\n  useEffect(() => {\n    if (galleryPage === 2) {\n      bridge.send(\"VKWebAppGetGeodata\").then(data => {\n        // Обработка события в случае успеха\n        setGeoLocation({\n          lat: data.lat,\n          long: data.long,\n          firstEntry: false,\n          currentGeo: {\n            center: [data.lat, data.long],\n            zoom: 15\n          },\n          coordinates: [[data.lat, data.long]]\n        });\n        console.log(data);\n      }).catch(error => {// Обработка события в случае ошибки\n      });\n      localStorage.setItem(\"alreadyLaunched\", true);\n    }\n  }, [galleryPage]);\n  const modal = /*#__PURE__*/React.createElement(ModalRoot, {\n    activeModal: geoModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ModalCard, {\n    id: \"geo\",\n    onClose: () => setGeoModal(null),\n    header: /*#__PURE__*/React.createElement(ModalPageHeader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }\n    }, \"\\u0422\\u044B \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0435\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, !mapVisible && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      alignItems: \"center\",\n      flexDirection: \"column\",\n      height: 240\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Spinner, {\n    size: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  })), geoLocation.coordinates && /*#__PURE__*/React.createElement(YMaps, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: 20,\n      marginBottom: 12\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Map, {\n    defaultState: geoLocation.currentGeo,\n    instanceRef: ref => {\n      ref && ref.behaviors.disable(\"drag\") && setMapVisible(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 15\n    }\n  }, geoLocation.coordinates.map(coordinate => /*#__PURE__*/React.createElement(Placemark, {\n    geometry: coordinate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 19\n    }\n  }))))), /*#__PURE__*/React.createElement(Button, {\n    size: \"l\",\n    stretched: true,\n    mode: \"secondary\",\n    onClick: () => setActivePanel(\"main\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, \"\\u042F\\u0441\\u043D\\u043E\")));\n\n  const FirstSlide = () => /*#__PURE__*/React.createElement(Panel, {\n    id: id,\n    centered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Welcome__Icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: pizza,\n    alt: \"Pizza Icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Text, {\n    weight: \"regular\",\n    style: {\n      textAlign: \"center\",\n      width: \"75%\",\n      color: \"#404040\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }, \"\\u0415\\u0436\\u0435\\u0433\\u043E\\u0434\\u043D\\u043E \\u0432 \\u043C\\u0438\\u0440\\u0435 \\u0432\\u044B\\u0431\\u0440\\u0430\\u0441\\u044B\\u0432\\u0430\\u0435\\u0442\\u0441\\u044F \\u043E\\u043A\\u043E\\u043B\\u043E 884 \\u043C\\u043B\\u043D \\u0442\\u043E\\u043D\\u043D \\u0435\\u0434\\u044B...\"));\n\n  const SecondSlide = () => /*#__PURE__*/React.createElement(Panel, {\n    id: id,\n    centered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Welcome__Icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: person,\n    alt: \"Soup Icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Text, {\n    weight: \"regular\",\n    style: {\n      textAlign: \"center\",\n      width: \"70%\",\n      color: \"#404040\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }\n  }, \"\\u041D\\u043E \\u0437\\u0430\\u0447\\u0435\\u043C \\u0432\\u044B\\u0431\\u0440\\u0430\\u0441\\u044B\\u0432\\u0430\\u0442\\u044C, \\u0435\\u0441\\u043B\\u0438 \\u043C\\u043E\\u0436\\u043D\\u043E \\u0435\\u0435 \\u043A\\u043E\\u043C\\u0443-\\u043D\\u0438\\u0431\\u0443\\u0434\\u044C \\u043E\\u0442\\u0434\\u0430\\u0442\\u044C?\"));\n\n  const ThirdSlide = () => /*#__PURE__*/React.createElement(Panel, {\n    id: id,\n    centered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Welcome__Icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: home,\n    alt: \"Location Icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Text, {\n    weight: \"regular\",\n    style: {\n      textAlign: \"center\",\n      width: \"75%\",\n      color: \"#404040\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }\n  }, \"\\u041E\\u0431\\u043C\\u0435\\u043D\\u0438\\u0432\\u0430\\u0439\\u0441\\u044F \\u043B\\u0438\\u0448\\u043D\\u0435\\u0439 \\u0435\\u0434\\u043E\\u0439 \\u0441 \\u0442\\u0435\\u043C\\u0438, \\u043A\\u0442\\u043E \\u0436\\u0438\\u0432\\u0435\\u0442 \\u043D\\u0435\\u043F\\u043E\\u0434\\u0430\\u043B\\u0435\\u043A\\u0443.\"));\n\n  const renderButton = page => {\n    switch (page) {\n      case 0:\n        return /*#__PURE__*/React.createElement(Button, {\n          size: \"l\",\n          stretched: true,\n          className: \"Welcome__Button\",\n          style: {\n            margin: \"0px 20px\",\n            padding: \"4px 0px\"\n          },\n          onClick: () => setGalleryPage(1),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 11\n          }\n        }, \"\\u042D\\u0442\\u043E \\u0443\\u0436\\u0430\\u0441\\u043D\\u043E!\");\n\n      case 1:\n        return /*#__PURE__*/React.createElement(Button, {\n          size: \"l\",\n          stretched: true,\n          className: \"Welcome__Button\",\n          style: {\n            margin: \"0px 20px\",\n            padding: \"4px 0px\"\n          },\n          onClick: () => setGalleryPage(2),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 11\n          }\n        }, \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\");\n\n      case 2:\n        return /*#__PURE__*/React.createElement(Button, {\n          size: \"l\",\n          stretched: true,\n          mode: \"commerce\",\n          className: \"Welcome__Button\",\n          style: {\n            margin: \"0px 20px\",\n            padding: \"4px 0px\"\n          },\n          onClick: () => setGeoModal(\"geo\"),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 11\n          }\n        }, \"\\u041E\\u043F\\u0440\\u0435\\u0434\\u0435\\u043B\\u0438\\u0442\\u044C \\u043B\\u043E\\u043A\\u0430\\u0446\\u0438\\u044E\");\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(View, {\n    activePanel: activePanel,\n    popout: popout,\n    modal: modal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Panel, {\n    id: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(PanelHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 9\n    }\n  }, \"\\u0415\\u0434\\u0430 \\u0440\\u044F\\u0434\\u043E\\u043C\"), /*#__PURE__*/React.createElement(Group, {\n    header: /*#__PURE__*/React.createElement(Header, {\n      mode: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 24\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Gallery, {\n    slideWidth: \"100%\",\n    style: {\n      height: \"100%\",\n      paddingBottom: 85,\n      postion: \"relative\"\n    },\n    bullets: \"dark\",\n    onChange: number => setGalleryPage(number),\n    slideIndex: galleryPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FirstSlide, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(SecondSlide, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(ThirdSlide, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(Div, {\n    style: {\n      display: \"flex\",\n      marginTop: 15\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 9\n    }\n  }, renderButton(galleryPage))));\n};\n\nWelcome.propTypes = {\n  id: PropTypes.string.isRequired,\n  go: PropTypes.func.isRequired\n};\nexport default Welcome;","map":{"version":3,"sources":["/home/thresh/projects/EdaDarom/src/panels/Welcome.js"],"names":["React","useEffect","useState","PropTypes","YMaps","Map","Placemark","GeolocationControl","View","Panel","ModalRoot","ModalPage","ModalCard","PanelHeader","Button","Group","List","Cell","Div","Gallery","InfoRow","Avatar","Header","Text","ModalPageHeader","PanelHeaderButton","Spinner","ANDROID","IOS","usePlatform","bridge","Icon24Cancel","Icon24Dismiss","pizza","person","home","Welcome","id","activePanel","setActivePanel","popout","go","fetchedUser","galleryPage","setGalleryPage","geoLocation","setGeoLocation","lat","long","firstEntry","currentGeo","coordinates","geoModal","setGeoModal","mapVisible","setMapVisible","send","then","data","center","zoom","console","log","catch","error","localStorage","setItem","modal","display","alignItems","flexDirection","height","marginTop","marginBottom","ref","behaviors","disable","map","coordinate","FirstSlide","textAlign","width","color","SecondSlide","ThirdSlide","renderButton","page","margin","padding","paddingBottom","postion","number","propTypes","string","isRequired","func"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { YMaps, Map, Placemark, GeolocationControl } from \"react-yandex-maps\";\n\nimport {\n  View,\n  Panel,\n  ModalRoot,\n  ModalPage,\n  ModalCard,\n  PanelHeader,\n  Button,\n  Group,\n  List,\n  Cell,\n  Div,\n  Gallery,\n  InfoRow,\n  Avatar,\n  Header,\n  Text,\n  ModalPageHeader,\n  PanelHeaderButton,\n  Spinner,\n  ANDROID,\n  IOS,\n  usePlatform,\n} from \"@vkontakte/vkui\";\nimport bridge from \"@vkontakte/vk-bridge\";\n\nimport Icon24Cancel from \"@vkontakte/icons/dist/24/cancel\";\nimport Icon24Dismiss from \"@vkontakte/icons/dist/24/dismiss\";\n\nimport pizza from \"../img/pizza.png\";\nimport person from \"../img/person.png\";\nimport home from \"../img/home.png\";\n\nconst Welcome = ({\n  id,\n  activePanel,\n  setActivePanel,\n  popout,\n  go,\n  fetchedUser,\n}) => {\n  const [galleryPage, setGalleryPage] = useState(0);\n  const [geoLocation, setGeoLocation] = useState({\n    lat: null,\n    long: null,\n    firstEntry: false,\n    currentGeo: {},\n    coordinates: null,\n  });\n  const [geoModal, setGeoModal] = useState(null);\n  const [mapVisible, setMapVisible] = useState(false);\n\n  useEffect(() => {\n    if (galleryPage === 2) {\n      bridge\n        .send(\"VKWebAppGetGeodata\")\n        .then((data) => {\n          // Обработка события в случае успеха\n          setGeoLocation({\n            lat: data.lat,\n            long: data.long,\n            firstEntry: false,\n            currentGeo: {\n              center: [data.lat, data.long],\n              zoom: 15,\n            },\n            coordinates: [[data.lat, data.long]],\n          });\n          console.log(data);\n        })\n        .catch((error) => {\n          // Обработка события в случае ошибки\n        });\n      localStorage.setItem(\"alreadyLaunched\", true);\n    }\n  }, [galleryPage]);\n\n  const modal = (\n    <ModalRoot activeModal={geoModal}>\n      <ModalCard\n        id=\"geo\"\n        onClose={() => setGeoModal(null)}\n        header={<ModalPageHeader>Ты на карте</ModalPageHeader>}\n      >\n        {!mapVisible && (\n          <div\n            style={{\n              display: \"flex\",\n              alignItems: \"center\",\n              flexDirection: \"column\",\n              height: 240,\n            }}\n          >\n            <Spinner size=\"large\" />\n          </div>\n        )}\n        {geoLocation.coordinates && (\n          <YMaps>\n            <div style={{ marginTop: 20, marginBottom: 12 }}>\n              <Map\n                defaultState={geoLocation.currentGeo}\n                instanceRef={(ref) => {\n                  ref && ref.behaviors.disable(\"drag\") && setMapVisible(true);\n                }}\n              >\n                {geoLocation.coordinates.map((coordinate) => (\n                  <Placemark geometry={coordinate} />\n                ))}\n              </Map>\n            </div>\n          </YMaps>\n        )}\n        <Button\n          size=\"l\"\n          stretched\n          mode=\"secondary\"\n          onClick={() => setActivePanel(\"main\")}\n        >\n          Ясно\n        </Button>\n      </ModalCard>\n    </ModalRoot>\n  );\n\n  const FirstSlide = () => (\n    <Panel id={id} centered>\n      <div className=\"Welcome__Icon\">\n        <img src={pizza} alt=\"Pizza Icon\" />\n      </div>\n      <Text\n        weight=\"regular\"\n        style={{ textAlign: \"center\", width: \"75%\", color: \"#404040\" }}\n      >\n        Ежегодно в мире выбрасывается около 884 млн тонн еды...\n      </Text>\n    </Panel>\n  );\n\n  const SecondSlide = () => (\n    <Panel id={id} centered>\n      <div className=\"Welcome__Icon\">\n        <img src={person} alt=\"Soup Icon\" />\n      </div>\n      <Text\n        weight=\"regular\"\n        style={{ textAlign: \"center\", width: \"70%\", color: \"#404040\" }}\n      >\n        Но зачем выбрасывать, если можно ее кому-нибудь отдать?\n      </Text>\n    </Panel>\n  );\n\n  const ThirdSlide = () => (\n    <Panel id={id} centered>\n      <div className=\"Welcome__Icon\">\n        <img src={home} alt=\"Location Icon\" />\n      </div>\n      <Text\n        weight=\"regular\"\n        style={{ textAlign: \"center\", width: \"75%\", color: \"#404040\" }}\n      >\n        Обменивайся лишней едой с теми, кто живет неподалеку.\n      </Text>\n    </Panel>\n  );\n\n  const renderButton = (page) => {\n    switch (page) {\n      case 0:\n        return (\n          <Button\n            size=\"l\"\n            stretched\n            className=\"Welcome__Button\"\n            style={{ margin: \"0px 20px\", padding: \"4px 0px\" }}\n            onClick={() => setGalleryPage(1)}\n          >\n            Это ужасно!\n          </Button>\n        );\n      case 1:\n        return (\n          <Button\n            size=\"l\"\n            stretched\n            className=\"Welcome__Button\"\n            style={{ margin: \"0px 20px\", padding: \"4px 0px\" }}\n            onClick={() => setGalleryPage(2)}\n          >\n            Действительно\n          </Button>\n        );\n      case 2:\n        return (\n          <Button\n            size=\"l\"\n            stretched\n            mode=\"commerce\"\n            className=\"Welcome__Button\"\n            style={{ margin: \"0px 20px\", padding: \"4px 0px\" }}\n            onClick={() => setGeoModal(\"geo\")}\n          >\n            Определить локацию\n          </Button>\n        );\n    }\n  };\n  return (\n    <View activePanel={activePanel} popout={popout} modal={modal}>\n      <Panel id={id}>\n        <PanelHeader>Еда рядом</PanelHeader>\n\n        <Group header={<Header mode=\"secondary\"></Header>}>\n          <Gallery\n            slideWidth=\"100%\"\n            style={{ height: \"100%\", paddingBottom: 85, postion: \"relative\" }}\n            bullets=\"dark\"\n            onChange={(number) => setGalleryPage(number)}\n            slideIndex={galleryPage}\n          >\n            <FirstSlide />\n            <SecondSlide />\n            <ThirdSlide />\n          </Gallery>\n        </Group>\n        <Div style={{ display: \"flex\", marginTop: 15 }}>\n          {renderButton(galleryPage)}\n        </Div>\n      </Panel>\n    </View>\n  );\n};\n\nWelcome.propTypes = {\n  id: PropTypes.string.isRequired,\n  go: PropTypes.func.isRequired,\n};\n\nexport default Welcome;\n"]},"metadata":{},"sourceType":"module"}